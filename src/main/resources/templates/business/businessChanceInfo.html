<!DOCTYPE html>
<html lang="ko" xmlns:th="https://www.thymeleaf.org">
<head>
<th:block th:replace="@{common/config} :: config"></th:block>
</head>

<body id="page-top">
	<div id="wrapper">
		<!-- Sidebar -->
		<th:block th:replace="@{/common/sidebar} :: sidebar"></th:block>

		<div id="content-wrapper" class="d-flex flex-column">
			<div id="content">
				<!-- Header -->
				<th:block th:replace="@{/common/header} :: header"></th:block>

				<!-- Container Fluid-->
				<div class="container-fluid" id="container-wrapper">
					<div class="d-sm-flex align-items-center justify-content-between mb-4">
						<h1 class="h3 mb-0 text-gray-800">영업기회</h1>
						<ol class="breadcrumb">
							<li class="breadcrumb-item"><a th:href="@{/dashboard}">Home</a></li>
							<li class="breadcrumb-item">영업관리</li>
							<li class="breadcrumb-item active" aria-current="page">영업기회정보</li>
						</ol>
					</div>
					
					<!-- Row -->
					<div class="row">
					
						<!-- DataTable with Hover -->
						<div class="col-lg-3" style="padding-left: 50px;">
							<div style="background: lightgray;">
								<div th:align="center"
									style="font-size: 20px; font-weight: bold; padding-top: 5px; padding-bottom: 5px;">영업기회 상태변경 이력</div>
							</div>
							<div class="card mb-4" style="overflow-y: scroll; width: 100%; height: 400px;">
								<div th:align="center" style="margin-left: 4px; margin-right: 4px; margin-top: 15px; margin-bottom: 15px;">
									<div th:each="chanceHistory : ${chanceHistoryList}">
										<div class="row-1">
											<span style="font-weight: bold; font-size: 20px;"
												th:text='|"${chanceHistory.empName}"|'>
											</span>
											<span>님이</span>
										</div>
										<div class="row-1">
											<span>진행단계를</span>
											<span style="font-weight: bold; font-size: 20px;"
												th:text='| "${chanceHistory.progressStatus}"|'>
											</span>
											<span>영업단계를</span>
											<span style="font-weight: bold; font-size: 20px;"
												th:text='| "${chanceHistory.salesLevel}"|'>
											</span>
										</div>
										<div class="row-1">
											<span>성공가능성을</span>
											<span style="font-weight: bold; font-size: 20px;"
												th:text='| "${chanceHistory.successPosibillity}%"|'>
											</span>
											<span>로 변경하셨습니다.</span>
										</div>
										<div th:text='|[${chanceHistory.businessChanceChangeDate}]|'>
										</div>
										
										<div>--------------------------------------------</div>
									</div>
								</div>
							</div>
						</div>
						<div class="col-lg-9" th:align="center">
							<div class="col-lg-10">
								<div style="background: lightgray;">
									<div th:align="center"
										style="font-size: 25px; font-weight: bold; padding-top: 5px; padding-bottom: 5px;">영업기회정보</div>
								</div>
								<div class="card mb-4">
									<form action="location.herf=''">
										<div class="form-group"
											style="margin-left: 30px; margin-right: 30px; margin-top: 15px;">
											<div class="row">
												<div class="form-group col-xl-1">
													<label>No</label>
													<div id="businessChanceNo" name="businessChanceNo" class="form-control"
														th:text="${businessChanceInfo.businessChanceNo}">
													</div>
												</div>
												<div class="form-group col-xl-5">
													<label>영업기회명</label>
													<div id="businessTitle" name="businessTitle" class="form-control"
														th:text="${businessChanceInfo.businessTitle}">
													</div>
												</div>
												<div class="form-group col-xl-1">
												</div>
												<div class="form-group col-xl-2">
													<label>진행상태</label>
													<div id="progressStatus" name="progressStatus" class="form-control"
														th:text="${businessChanceInfo.progressStatus}">
													</div>
												</div>
												<div class="form-group col-xl-1">
												</div>
												<div class="form-group col-xl-2">
													<label>담당사원</label>
													<div id="empName" name="empName" class="form-control"
														th:text="${businessChanceInfo.empName}">
													</div>
												</div>
											</div>
											<div class="row">
												<div class="form-group col-xl-3">
													<label>고객사</label>
													<div id="customerCompanyName" name="customerCompanyName" class="form-control"
														th:text="${businessChanceInfo.customerCompanyName}">
													</div>
												</div>
												<div class="form-group col-xl-3">
													<label>고객측담당자</label>
													<div id="customerName" name="customerName" class="form-control"
														th:text="${businessChanceInfo.customerName}">
													</div>
												</div>

												<div class="form-group col-xl-1">
												</div>
												<div class="form-group col-xl-2">
													<label>영업단계</label>
													<div id="salesLevel" name="salesLevel" class="form-control"
														th:text="${businessChanceInfo.salesLevel}">
													</div>
												</div>
												<div class="form-group col-xl-1">
												</div>
												<div class="form-group col-xl-2">
													<label>성공가능성</label>
													<div id="successPosibillity" name="successPosibillity" class="form-control"
														th:text="${businessChanceInfo.successPosibillity}+'%'">
													</div>
												</div>
											</div>
											<div class="row">
												<div class="form-group col-xl-6">
													<label>관심상품</label>
													<div style="white-space: nowrap; overflow-x: auto; width: auto; height: 50px; border: 1px solid lightgray;">
														<div id="productName" name="productName"
															th:text="${businessChanceInfo.productName}">
														</div>
													</div>
												</div>
												<div class="form-group col-xl-4">
												</div>
												<div class="form-group col-xl-2">
													<label>마감일</label>
													<div id="dueDate" name="dueDate" class="form-control"
														th:text="${businessChanceInfo.dueDate}">
													</div>
												</div>
											</div>
											<div class="row">
												<div class="form-group col-xl-12" th:align="center">
													<button class="btn btn-dark btn-icon-split"	style="margin-right: 1%; margin-top: 2%"
														th:onclick="location.href=''">
														<span class="icon text-white-50">
															<i class="fas fa-edit"></i>
														</span>
														<span class="text text-white">수정하기</span>
													</button>
													<a class="btn btn-success btn-icon-split" style="margin-left: 1%; margin-top: 2%"
														th:onclick="location.href=''">
														<span class="icon text-white-50">
															<i class="fas fa-info-circle"></i>
														</span>
														<span class="text text-white">고객정보</span>
													</a>
												</div>
											</div>
										</div>
									</form>
								</div>
							</div>
						</div>
					</div>

					<!-- Row -->
					<div class="row">

						<!-- DataTable with Hover -->
						<div class="col-lg-4"></div>
						<div class="col-lg-7">
								<div class="card mb-4" style="background: #F6F2FB;">
									<div class="card-header py-3 d-flex flex-row align-items-center justify-content-between"
										style="background: lightgray;">
										<h6 class="m-0 font-weight-bold text-primary">영업활동내역</h6>
										<div>
											<a class="btn btn-info btn-icon-split"
												th:onclick="location.href=''">
												<span class="icon text-white">
													<i class="fas fa-edit"></i>
												</span>
												<span class="text text-white">활동이력등록</span>
											</a>
										</div>
									</div>
									<div class="table-responsive p-3"
										style="overflow-y: scroll; height: 450px;">
										<table class="table align-items-center table-flush table-hover"	id="dataTableHover">
											<thead align="center" class="thead-light">
												<tr>
													<th>활동이력번호</th>
													<th>활동주제</th>
													<th>담당자</th>
													<th>등록일</th>
													<th>관리</th>
												</tr>
											</thead>
											<tbody align="center">
												<tr th:each="activityList : ${businessActivityList}">
													<td th:text="${activityList.activityNo}"></td>
													<td th:text="${activityList.businessSubject}"></td>
													<td th:text="${activityList.empName}"></td>
													<td th:text="${activityList.writingTime}"></td>
													<td><a class="btn btn-light btn-icon-split"
														th:href="@{/business/selectBasicInfo(activityNo=${ activityList.activityNo })}">
															<span class="icon text-black-50">
																<i class="fas fa-clipboard-list">
																</i>
															</span>
															<span class="text text-black">상세정보</span>
														</a>
													</td>
												</tr>
											</tbody>
										</table>
									</div>
								</div>
							</div>
						<div class="col-lg-1">
						</div>
					</div>
				</div>
				
				<!-- End ContainerFluid -->
			</div>
		</div>
	</div>

	<!-- Script -->
	<th:block th:replace="@{/common/script} :: script"></th:block>

	<!-- Page level plugins -->

	<!-- Page level custom scripts -->
	<script>
    $(document).ready(function () {
      $('#dataTable').DataTable(); // ID From dataTable 
      $('#dataTableHover').DataTable(); // ID From dataTable with Hover
    });
  </script>
</body>
</html>